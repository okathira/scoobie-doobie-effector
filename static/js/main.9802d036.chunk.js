(this["webpackJsonpscoobie-doobie-effector"]=this["webpackJsonpscoobie-doobie-effector"]||[]).push([[0],{78:function(t,e,c){"use strict";c.r(e);var a=c(7),i=c(5),n=c.n(i),r=c(29),s=c.n(r),o=c(32),h=c(13),u=c(33),d=c(30),b=c.n(d),g=c(9),j=function(t){var e=t.currentFrame,c=t.boxesProps;return Object(a.jsxs)(g.b,{children:[Object(a.jsx)(g.a,{id:"baseCanvas",image:e}),c.map((function(t){return Object(a.jsx)(g.a,{image:e,crop:{x:t.srcX,y:t.srcY,width:t.srcWidth,height:t.srcHeight},x:t.showX,y:t.showY,width:t.showWidth,height:t.showHeight,stroke:"black",strokeWidth:10,draggable:!0},t.key)}))]})},l={width:1280,height:720,facingMode:"user"},f=Object(u.a)({},l),v=function(t){var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e},w=function(){var t=Object(i.useState)(v(f)),e=Object(h.a)(t,2),c=e[0],n=e[1],r=Object(i.useState)(),s=Object(h.a)(r,2),u=s[0],d=s[1],w=Object(i.useState)([]),O=Object(h.a)(w,2),x=O[0],m=O[1],p=Object(i.useState)({x:0,y:0}),y=Object(h.a)(p,2),k=y[0],X=y[1],Y=Object(i.useRef)(null),I=Object(i.useRef)(null);Object(i.useEffect)((function(){return d(setInterval((function(){return function(){var t=v(f).getContext("2d");t.drawImage(Y.current.video,0,0);var e=t.getImageData(0,0,f.width,f.height);!function(t){for(var e=t.data.length/4,c=0;c<e;c++){var a=.299*t.data[4*c+0]+.587*t.data[4*c+1]+.114*t.data[4*c+2];t.data[4*c+0]=a,t.data[4*c+1]=a,t.data[4*c+2]=a}}(e),t.putImageData(e,0,0),n(t.canvas)}()}),1e3/30)),function(){clearInterval(u)}}),[]);return Object(a.jsxs)("section",{className:"App",children:[Object(a.jsx)(b.a,{id:"camera",ref:Y,audio:!1,videoConstraints:l,width:f.width,height:f.height,style:{position:"absolute"}}),Object(a.jsx)(g.c,{className:"inputArea",ref:I,width:f.width,height:f.height,onMouseDown:function(t){X({x:t.evt.clientX,y:t.evt.clientY})},onClick:function(t){var e=function(){var t=I.current,e=t.getAbsoluteTransform().copy();e.invert();var c=t.getStage().getPointerPosition();return e.point(c)}();m([].concat(Object(o.a)(x),[{key:x.length,srcX:e.x,srcY:e.y,srcWidth:k.x-t.evt.clientX,srcHeight:k.y-t.evt.clientY,showX:e.x,showY:e.y,showWidth:k.x-t.evt.clientX,showHeight:k.y-t.evt.clientY}]))}}),Object(a.jsx)(g.c,{className:"outputArea",width:f.width,height:f.height,children:Object(a.jsx)(j,{currentFrame:c,boxesProps:x})})]})};s.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(w,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.9802d036.chunk.js.map