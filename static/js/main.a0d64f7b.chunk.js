(this["webpackJsonpscoobie-doobie-effector"]=this["webpackJsonpscoobie-doobie-effector"]||[]).push([[0],{78:function(e,t,a){"use strict";a.r(t);var c=a(7),n=a(4),r=a.n(n),i=a(29),s=a.n(i),o=a(32),h=a(12),d=a(33),u=a(30),b=a.n(u),j=a(8),g=function(e){var t=e.currentFrame,a=e.boxesProps;return Object(c.jsxs)(j.b,{children:[Object(c.jsx)(j.a,{id:"baseCanvas",image:t}),a.map((function(e){return Object(c.jsx)(j.a,{image:t,crop:{x:e.srcX,y:e.srcY,width:e.srcWidth,height:e.srcHeight},x:e.showX,y:e.showY,width:e.showWidth,height:e.showHeight,stroke:"black",strokeWidth:10,draggable:!0},e.key)}))]})},l={width:1280,height:720,facingMode:"user"},x=Object(d.a)({},l),f=function(e){var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t},O=function(e){var t=e.beginPos,a=e.endPos;return Object(c.jsx)(j.c,{x:t.x,y:t.y,width:a.x-t.x,height:a.y-t.y,fill:"blue",stroke:"red",opacity:.2})},w=function(){var e=Object(n.useState)(f(x)),t=Object(h.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(),s=Object(h.a)(i,2),d=s[0],u=s[1],w=Object(n.useState)([]),v=Object(h.a)(w,2),p=v[0],y=v[1],m=Object(n.useState)({x:0,y:0}),k=Object(h.a)(m,2),P=k[0],S=k[1],I=Object(n.useState)(!1),W=Object(h.a)(I,2),A=W[0],H=W[1],M=Object(n.useRef)(null),X=Object(n.useRef)(null);Object(n.useEffect)((function(){return u(setInterval((function(){return function(){var e=f(x).getContext("2d");e.drawImage(M.current.video,0,0);var t=e.getImageData(0,0,x.width,x.height);!function(e){for(var t=e.data.length/4,a=0;a<t;a++){var c=.299*e.data[4*a+0]+.587*e.data[4*a+1]+.114*e.data[4*a+2];e.data[4*a+0]=c,e.data[4*a+1]=c,e.data[4*a+2]=c}}(t),e.putImageData(t,0,0),r(e.canvas)}()}),1e3/30)),function(){clearInterval(d)}}),[]);var Y=function(){var e=X.current,t=e.getAbsoluteTransform().copy();t.invert();var a=e.getStage().getPointerPosition();return t.point(a)};return Object(c.jsxs)("section",{className:"App",children:[Object(c.jsx)(b.a,{id:"camera",ref:M,audio:!1,videoConstraints:l,width:x.width,height:x.height,style:{position:"absolute"}}),Object(c.jsx)(j.d,{className:"inputArea",width:x.width,height:x.height,ref:X,onMouseDown:function(){S(Y()),H(!0)},onMouseUp:function(){var e=Y();y([].concat(Object(o.a)(p),[{key:p.length,srcX:e.x,srcY:e.y,srcWidth:P.x-e.x,srcHeight:P.y-e.y,showX:e.x,showY:e.y,showWidth:P.x-e.x,showHeight:P.y-e.y}])),H(!1)},children:Object(c.jsx)(j.b,{children:A?Object(c.jsx)(O,{beginPos:P,endPos:Y()}):null})}),Object(c.jsx)(j.d,{className:"outputArea",width:x.width,height:x.height,children:Object(c.jsx)(g,{currentFrame:a,boxesProps:p})})]})};s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(w,{})}),document.getElementById("root"))}},[[78,1,2]]]);
//# sourceMappingURL=main.a0d64f7b.chunk.js.map